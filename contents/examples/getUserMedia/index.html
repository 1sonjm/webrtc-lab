<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>WebRTC 연구실 - getUserMedia</title>
    <meta name="description" content="WebRTC에 대한 정보 공유 (getUserMedia)">
    <meta name="author" content="codeJS">
    <meta name="viewport" content="width=device-width; initial-scale=1.0">
    <link href="/img/logo-webrtc.png" type="image/png" rel="icon">
    <link href="/css/style.css" type="text/css" rel="stylesheet">
  </head>

  <body>
    <header>
      <h1>WebRTC 연구실 - 마이크 & 캠 접근하기</h1>
    </header>
    
    <div id="content">
      <div class="wrap-640">
        <video autoplay></video>
        <button>getUserMedia()</button>
      </div>
    </div>

    <footer>
      <p>
        <a href="http://www.codejs.co.kr">&copy; Copyright by codeJS</a>
      </p>
    </footer>
    
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script>
      $(function() {
        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
        
        $('button').click(function() {
          // getUserMedia(접근할 미디어, 성공 callback, 실패 callback);
          navigator.getUserMedia({audio:true, video:true}, success, error);
        });
  
        function success(stream) {
          // 비디오 테그에 stream 전달.
          $('video')[0].src = window.URL.createObjectURL(stream);
          
          // do something...
        }
        
        function error(err) {
          console.log('error', arguments);
        }
      });
    </script>
  </body>
</html>
